# 医疗商保理赔场景下的数据发布实验

## 实验目的
1. 理解不同的数据发布模式以及其适用场景
2. 学会使用Nacos进行数据服务化发布的方法
3. 学会数据脱敏的各种方法
4. 了解差分隐私的技术原理，学会使用差分隐私技术进行数据发布的方法
5. 了解数据发布的技术原理，学会使用相关技术进行数据生成
6. 了解数据模型化发布的原理

## 场景描述
目前，医疗健康的商业保险的理赔环节，需要保险用户自己提供的材料非常复杂。除了要提供申请人的身份证以外，还需要提供能支持索赔的全部账单、证明、信息和证据，比如病历资料、诊断书、处方、病理检查报告、化验检查报告、出院小结、医疗费用原始单据、费用明细单据等。同时整个过程需要人工上传相关的记录和证明材料，并且由保险公司进行线下核实，整个理赔流程环节繁琐、审核周期长，用户体验十分不友好。

为打通商保服务民生最后一公里，某市卫健委、市数据局、数据资产运营有限公司、保险公司等多方参与，共同探索开展线上快保核赔业务，该业务经个人授权同意后，利用卫健委已汇聚的医疗机构的诊疗记录、发生费用、电子病历等医疗数据信息，通过数据要素在不同主体之间的流通，实现在线理赔核保、理赔服务，同时探索开展普惠保险产品设计，为老百姓提供更多优质普惠的医保产品，实现“数据多跑路，群众少跑腿，商保更普惠”。

在进行数据汇聚后，要想将数据提供给相关主体进行使用，还需要针对数据特点与相关主体需求，采用合理的数据发布方法进行数据发布。

## 数据说明
本项目数据集来自于四个主体：

1. `医院`，包括门诊数据、住院数据、检查数据、费用数据
2. `卫健委`，主要为医院基本信息、疾病描述信息
3. `人社局`，包括居民基本信息、医保参保信息、医保理赔结算数据
4. `保险公司`，包括商保产品数据、商保参保信息、商保理赔结算数据

数据保存在`data`文件夹中，更详细的数据信息介绍请参考相关说明文件

## 实验要求
1. `基本要求`：按照步骤完成数据发布的基本任务，最终生成实验报告文件，并附上必要的代码与运行测试结果
2. `拓展要求`：按照步骤提示，完成拓展任务

## 实验步骤
### 任务一：为保险公司提供数据服务(数据服务化发布)
保险公司在进行理赔时，需要知晓医院各种检查、治疗等方案的公示价格，以及疾病基础信息等数据，这些数据由于并不敏感，可以直接公式于众。为了方便访问，数据中心将把这些数据进行服务化发布。

以上需求涉及到医院主体的数据和卫健委的数据，请分别设计出相关的SQL查询语句，并使用nacos将服务进行部署。

当数据需求比较复杂和涉及不同的数据源时，往往无法在一个服务中实现全部数据需求。数据中心除了提供上述数据服务以外，还希望给民众提供一键查询疾病信息与治疗方案的服务，故`拓展任务`则要求你依照BPMN规范进行服务组合，实现这项服务。

### 任务二：为医疗学术界提供数据服务(隐私数据保护)
医疗学术界为了进行临床相关的研究，需要医院主体的病患相关信息。这部分数据涉及到个人隐私，需要进行隐私技术处理后才可进行发布。具体需要进行的操作如下：

- 数据脱敏：请现使用数据脱敏的相关技术，将个人基础信息进行脱敏处理
- 数据匿名：KACA算法的k-匿名技术将数据进行进一步处理
- (`拓展要求`)数据扰乱：使用差分隐私算法进一步将个人信息加密

本任务只需要你处理医院A的住院数据表(InpatientData)即可。为了统一匿名规则，请以年龄,身高(cm),体重(kg),性别,住址作为准标识符，进行KACA算法

### 任务三：为社会科学学术界提供数据服务(数据生成)
社会科学界的相关人员希望根据人社局与医院的数据进行相关科学研究，但人社局数据属于国家机密数据，且社科研究者更多地是进行统计学相关分析，故本部分采用合成数据生成的方法进行数据发布。

为简化问题，本实验只要求你进行人社局部分数据的生成。本实验提供的数据生成器详见[`RelGen`项目](https://github.com/ruc-datalab/RelGen/tree/main)，该项目使用了神经网络模型来合成数据，其使用方法详其说明文档，想要对该项目有更多了解可以阅读[论文:Tabular data synthesis with generative adversarial networks: design space and optimizations](https://link.springer.com/article/10.1007/s00778-023-00807-y)

你所生成的数据应包括以下几个属性："年龄"、"性别"、"职业"、"月收入"、"常住地址"、"参保类型"、"参保状态"

事实上，社科研究者更多地是进行统计学相关分析，故本任务也可使用基于统计关系的进行数据生成。`拓展任务`要求你自行查找资料，尝试使用基于统计关系进行数据生成，并将原数据、RelGen合成数据、统计关系合成数据进行比较，在统计学上的一些维度上(如平均值、中位数、相关性等)评估其生成数据的质量